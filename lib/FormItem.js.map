{"version":3,"sources":["../src/FormItem.js"],"names":["createFormItem","options","STATUS_OK","STATUS_VALIDATING","STATUS_ERROR","propTypes","className","string","infoClassName","okClassName","validatingClassName","errorClassName","defaultProps","FormItem","isValidating","context","isInputValidating","props","children","name","errors","getInputErrors","length","status","getInputStatus","wrapperClassName","indicatorClassName","position","errorStr","filter","error","map","message","join","renderField","renderError","contextTypes","func"],"mappings":"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","file":"FormItem.js","sourcesContent":["import React, { Component, PropTypes } from 'react';\n\nfunction createFormItem(options = {}) {\n  const STATUS_OK = 0;\n  const STATUS_VALIDATING = 1;\n  const STATUS_ERROR = 2;\n\n  const propTypes = {\n    className: PropTypes.string,\n    infoClassName: PropTypes.string,\n    okClassName: PropTypes.string,\n    validatingClassName: PropTypes.string,\n    errorClassName: PropTypes.string,\n  };\n\n  const defaultProps = {\n    className: options.className || 'zc-form-item',\n    infoClassName: options.infoClassName || 'zc-form-item-info',\n    okClassName: options.okClassName || '',\n    validatingClassName: options.validatingClassName || '',\n    errorClassName: options.errorClassName || '',\n  }\n\n  class FormItem extends Component {\n    getInputStatus() {\n      const isValidating = this.context.isInputValidating(this.props.children.props.name);\n      const errors = this.context.getInputErrors(this.props.children.props.name);\n      if (isValidating) {\n        return STATUS_VALIDATING;\n      } else if (errors.length > 0) {\n        return STATUS_ERROR;\n      }\n      return STATUS_OK;\n    }\n\n    renderField() {\n      const status = this.getInputStatus();\n      // TODO: still need to improve the code\n      let wrapperClassName;\n      switch (status) {\n        case STATUS_OK:\n          wrapperClassName = 'status-ok';\n        case STATUS_VALIDATING:\n          wrapperClassName = 'status-validating';\n        case STATUS_ERROR:\n          wrapperClassName = 'status-error';\n      }\n      let indicatorClassName = '';\n      switch (status) {\n        case STATUS_OK:\n          indicatorClassName = this.props.okClassName;\n        case STATUS_VALIDATING:\n          indicatorClassName = this.props.validatingClassName;\n        case STATUS_ERROR:\n          indicatorClassName = this.props.errorClassName;\n      }\n      return (\n        <div className={wrapperClassName} style={{ position: 'relative' }}>\n          {this.props.children}\n          <i className={indicatorClassName} />\n        </div>\n      );\n    }\n\n    renderError() {\n      if (this.getInputStatus() === STATUS_ERROR) {\n        const errors = this.context.getInputErrors(this.props.children.props.name);\n        const errorStr = errors.filter((error) => {\n          return !!error;\n        }).map((error) => {\n          return error.message;\n        }).join(', ');\n        return (\n          <div style={{ position: 'relative' }}>\n            <span className={this.props.infoClassName}>{errorStr}</span>\n          </div>\n        );\n      }\n      return '';\n    }\n\n    render() {\n      return (\n        <div className={this.props.className}>\n          {this.renderField()}\n          {this.renderError()}\n        </div>\n      );\n    }\n  }\n\n  FormItem.propTypes = propTypes;\n  FormItem.defaultProps = defaultProps;\n\n  FormItem.contextTypes = {\n    isInputValidating: PropTypes.func,\n    getInputErrors: PropTypes.func,\n  }\n\n  return FormItem;\n}\n\nexport default createFormItem();\nexport {\n  createFormItem,\n}\n"]}